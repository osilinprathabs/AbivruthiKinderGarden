<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-W54MDY769G"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-W54MDY769G');
    </script>
    <!-- Google Tag Manager -->
    <script>
        (function(w, d, s, l, i) {
            w[l] = w[l] || [];
            w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });
            var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s),
                dl = l != 'dataLayer' ? '&l=' + l : '';
            j.async = true;
            j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
            f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-NV6M2DGN');
    </script>
    <!-- End Google Tag Manager -->
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <title>ABIVRUTHI KINDERGARTEN</title>
    <link rel="icon" href="img/full/logo_footer.png" type="image/png">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <!-- animate CSS -->
    <link rel="stylesheet" href="css/animate.css" />
    <!-- font awesome CSS -->
    <link rel="stylesheet" href="vendors/fontawesome/css/all.min.css" />
    <!-- elegant icon CSS -->
    <link rel="stylesheet" href="vendors/elegant_Icon/elegent_icon.css" />
    <!-- themify icon CSS -->
    <link rel="stylesheet" href="vendors/themefy_icon/themify-icons.css" />
    <!-- nice select CSS -->
    <link rel="stylesheet" href="vendors/niceselect/css/nice-select.css" />
    <!-- owl carousel CSS -->
    <link rel="stylesheet" href="vendors/owl_carousel/css/owl.carousel.css" />
    <!-- magnify popup CSS -->
    <link rel="stylesheet" href="vendors/magnify_popup/magnific-popup.css" />
    <!-- style CSS -->
    <link rel="stylesheet" href="css/style.css" />
    
    <!-- Video Gallery Styles -->
    <style>
        /* Tab Styles */
        .filters ul {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            padding: 20px 0;
        }
        .filters li {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 25px;
            padding: 15px 25px;
            font-size: 18px;
            font-weight: 600;
            color: #495057;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 150px;
            text-align: center;
        }
        .filters li:hover {
            background: #e9ecef;
            border-color: #dee2e6;
            transform: translateY(-2px);
        }
        .filters li.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: #667eea;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }
        
        /* Video Thumbnail Styles */
/* Tab Section Styles */
.program_list {
    min-height: 600px; /* Increased minimum height to make the section taller */
    padding: 40px 0; /* Adjusted padding to complement the increased height */
}

.program_list .row {
    min-height: 500px; /* Ensures the row inside the section has sufficient height */
}

/* Video Thumbnail Styles (unchanged from previous adjustment) */
.video_thumbnail {
    position: relative;
    width: 100%;
    height: 300px; /* Retained from previous change */
    overflow: hidden;
    border-radius: 4px;
}

.video_thumbnail video {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.video_thumbnail .video_overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.4);
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.video_thumbnail:hover .video_overlay {
    opacity: 1;
}

.video_popup_btn {
    width: 60px;
    height: 60px;
    background: rgba(255, 255, 255, 0.9);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    text-decoration: none;
    color: #333;
    font-size: 24px;
    transition: all 0.3s ease;
}

.video_popup_btn:hover {
    background: rgba(255, 255, 255, 1);
    transform: scale(1.1);
    color: #333;
    text-decoration: none;
}

/* Mobile adjustments */
@media (max-width: 576px) {
    .program_list {
        min-height: 400px; /* Adjusted minimum height for mobile */
        padding: 20px 0;
    }

    .program_list .row {
        min-height: 300px; /* Adjusted row height for mobile */
    }

    .video_thumbnail {
        height: 200px; /* Retained from previous change */
    }

        }
    </style>
</head>

<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript>
        <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NV6M2DGN" height="0" width="0"
            style="display:none;visibility:hidden"></iframe>
    </noscript>
    <!-- End Google Tag Manager (noscript) -->
    <!-- Preloader -->
    <div class='preloder'>
        <div class='loader'>
            <div class='loader--dot'></div>
            <div class='loader--dot'></div>
            <div class='loader--dot'></div>
            <div class='loader--dot'></div>
            <div class='loader--dot'></div>
            <div class='loader--dot'></div>
            <div class='loader--text'></div>
        </div>
    </div>
    <!-- End Preloader -->

    <?php include 'header.php'; ?>

    <!-- banner part here -->
    <section class="banner_part bannerslider owl-carousel">
        <div class="single_banner_part bg_1">
            <div class="container">
                <div class="row justify-content-center align-items-center">
                    <div class="col-xl-10 col-lg-10 col-md-10">
                        <div class="banner_iner">
                            <h2><span>Nurturing</span>Young <span>Minds</span></h2>
                            <p>Comprehensive Early Childhood Education at Abivruthi Kindergarten School</p>
                            <a href="contact.php" class="cu_btn btn_2">Contact Us</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="single_banner_part bg_1">
            <div class="container">
                <div class="row justify-content-center align-items-center">
                    <div class="col-xl-8 col-lg-10 col-md-10">
                        <div class="banner_iner">
                            <h2><span>Explore,</span> Learn,<span>and Grow</span></h2>
                            <p>A Holistic Pre-Primary Experience at Abivruthi Kindergarten School</p>
                            <a href="contact.php" class="cu_btn btn_2">Contact Us</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- banner part end -->

    <!-- Tab Part -->
    <section class="program_list program_list_page section_padding" id="program_list">
        <div class="container custom_container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="filters">
                        <ul>
                            <li data-filter=".week_activities" class="active">This Week Highlights</li>
                            <li data-filter=".celebration">Celebration</li>
                            <li data-filter=".dayCorner">Day Care Corner</li>
                            <li data-filter=".club_activities">Club Activities</li>
                        </ul>
                    </div>
                </div>
                <div class="col-md-10">
                    <div class="row grid" id="program_list_filter">
                        <p class="text-center text-muted" id="no-media-message" style="display: none;">No media available. Please check if media files are available in the server directory.</p>
                    </div>
                </div>
            </div>
            <div class="list_animation_1">
                <div><img src="img/icon/story_animation_5.png" alt="#"></div>
            </div>
            <div class="list_animation_2">
                <div><img src="img/icon/event_6.png" alt="#"></div>
            </div>
            <div class="list_animation_3">
                <div><img src="img/icon/icon_8.png" alt="#"></div>
            </div>
            <div class="list_animation_4">
                <div><img src="img/icon/contact_icon.png" alt="#"></div>
            </div>
            <div class="list_animation_5">
                <div><img src="img/icon/story_animation_5.png" alt="#"></div>
            </div>
            <div class="list_animation_6">
                <div><img src="img/icon/icon_9.png" alt="#"></div>
            </div>
        </section>
    <!-- Tab Part end -->

    <!-- services part here -->
    <section class="services_part wave_shape_bg sec_padding">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-7">
                    <div class="section_tittle_style_02">
                        <h2 class="title wow fadeInDown" data-wow-delay=".3s">What We Offer</h2>
                        <p class="description wow fadeInDown" data-wow-delay=".3s">Abivruthi Kindergarten School offers a comprehensive pre-primary program with play-based learning, language and numeracy skills, creative arts, physical development, cultural awareness, and robust safety measures.</p>
                    </div>
                </div>
            </div>
            <div class="row align-items-center">
                <div class="col-lg-6 wow fadeInLeft" data-wow-delay=".2s">
                    <div class="services_content">
                        <h3 class="mb-4">Abivruthi Kindergarten</h3>
                        <p class="mb-4">We provide a nurturing environment where every child can explore, learn, and grow. Our comprehensive early childhood education program focuses on holistic development through play-based learning and creative activities.</p>
                        <div class="services_features">
                            <div class="feature_item mb-3">
                                <div class="feature_icon">
                                    <i class="fas fa-heart"></i>
                                </div>
                                <div class="feature_text">
                                    <h5>Nurturing Environment</h5>
                                    <p>Safe and caring atmosphere for optimal learning</p>
                                </div>
                            </div>
                            <div class="feature_item mb-3">
                                <div class="feature_icon">
                                    <i class="fas fa-graduation-cap"></i>
                                </div>
                                <div class="feature_text">
                                    <h5>Qualified Teachers</h5>
                                    <p>Experienced educators dedicated to child development</p>
                                </div>
                            </div>
                            <div class="feature_item mb-3">
                                <div class="feature_icon">
                                    <i class="fas fa-palette"></i>
                                </div>
                                <div class="feature_text">
                                    <h5>Creative Learning</h5>
                                    <p>Arts, crafts, and imaginative play activities</p>
                                </div>
                            </div>
                        </div>
                        <a href="about.php" class="cu_btn btn_1 mt-4">Learn More About Us</a>
                    </div>
                </div>
                <div class="col-lg-6 wow fadeInRight" data-wow-delay=".4s">
                    <div class="services_image_wrapper">
                        <div class="main_image">
                            <img src="img/full/ukg1.jpg" alt="Kindergarten Activities" class="img-fluid rounded">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="services_shape_animation_1">
            <div><img src="img/animation_shape/feature_shape_01.png" alt="#"></div>
        </div>
        <div class="services_shape_animation_2">
            <div><img src="img/animation_shape/feature_shape_02.png" alt="#"></div>
        </div>
        <div class="services_shape_animation_3">
            <div><img src="img/animation_shape/feature_shape_03.png" alt="#"></div>
        </div>
        <div class="services_shape_animation_4">
            <div><img src="img/animation_shape/feature_shape_04.png" alt="#"></div>
        </div>
    </section>
    <!-- services part end -->

    <!-- features part here -->
    <section class="fetures_part padding_bottom">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-7">
                    <div class="section_tittle_style_02">
                        <h2 class="title wow fadeInDown" data-wow-delay=".3s">Educational Programs</h2>
                        <p class="description wow fadeInDown" data-wow-delay=".3s">Abivruthi Kindergarten School offers a comprehensive pre-primary educational program that ensure every child.</p>
                    </div>
                </div>
            </div>
            <div class="row justify-content-between">
                <div class="col-lg-4 col-sm-6 wow fadeInUp" data-wow-delay=".2s">
                    <div class="single_fetures_part">
                        <div class="single_fetures_icon">
                            <img src="img/program_img/program_img_01.png" alt="#" class="img-fluid">
                        </div>
                        <h4><a href="about.php">Holistic Learning Approach</a></h4>
                        <p>Play-Based Learning, Language and Literacy Development, Numeracy Skills, Science and Discovery, Creative Arts.</p>
                    </div>
                </div>
                <div class="col-lg-4 col-sm-6 wow fadeInUp" data-wow-delay=".5s">
                    <div class="single_fetures_part lightblue_bg">
                        <div class="single_fetures_icon">
                            <img src="img/program_img/program_img_02.png" alt="#" class="img-fluid">
                        </div>
                        <h4><a href="about.php">Development and Well-Being</a></h4>
                        <p>Social and Emotional Learning, Physical Development, Cultural, Environmental and Sustainability Education.</p>
                    </div>
                </div>
                <div class="col-lg-4 col-sm-6 wow fadeInUp" data-wow-delay=".8s">
                    <div class="single_fetures_part pink_bg">
                        <div class="single_fetures_icon">
                            <img src="img/program_img/program_img_03.png" alt="#" class="img-fluid">
                        </div>
                        <h4><a href="about.php">Community and Safety</a></h4>
                        <p>Parent and Community Involvement, Safety and Security Measure, Health and Hygiene, Crisis Management.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="feature_animation_1">
            <div><img src="img/animation_shape/program_list_shape_01.png" alt="#"></div>
        </div>
        <div class="feature_animation_2">
            <div><img src="img/animation_shape/program_list_shape_02.png" alt="#"></div>
        </div>
        <div class="feature_animation_3">
            <div><img src="img/animation_shape/program_list_shape_03.png" alt="#"></div>
        </div>
        <div class="feature_animation_4">
            <div><img src="img/animation_shape/program_list_shape_04.png" alt="#"></div>
        </div>
    </section>
    <!-- features part end -->

    <!-- testimonial part here -->
    <section class="teacher_list section_padding">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-7">
                    <div class="section_tittle_style_02">
                        <h2 class="title wow fadeInDown" data-wow-delay=".3s">Our Section</h2>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <div class="teacher_list_iner">
                        <div class="single_teacher_list" data-toggle="modal" data-target="#guidanceModal" style="cursor:pointer;">
                            <div class="teacher_list_img circle">
                                <img src="img/full/nt-22.png" alt="#" class="img-fluid">
                            </div>
                            <h5>Guidance</h5>
                        </div>
                        <div class="single_teacher_list" data-toggle="modal" data-target="#assessmentModal" style="cursor:pointer;">
                            <div class="teacher_list_img square">
                                <img src="img/full/nt3.png" alt="#" class="img-fluid">
                            </div>
                            <h5>Assessment</h5>
                        </div>
                    </div>
                </div>
            </div>
            <div class="teacher_list_animation_1">
                <div><img src="img/icon/event_6.png" alt="#"></div>
            </div>
            <div class="teacher_list_animation_2">
                <div><img src="img/icon/icon_1.png" alt="#"></div>
            </div>
            <div class="teacher_list_animation_3">
                <div><img src="img/icon/banner_icon/animated_banner_5.png" alt="#"></div>
            </div>
            <div class="teacher_list_animation_4">
                <div><img src="img/icon/icon_2.png" alt="#"></div>
            </div>
            <div class="teacher_list_animation_5">
                <div><img src="img/icon/icon_3.png" alt="#"></div>
            </div>
            <div class="teacher_list_animation_6">
                <div><img src="img/icon/icon_4.png" alt="#"></div>
            </div>
            <div class="teacher_list_shape">
                <div><img src="img/teacher_list_shape.png" alt="#"></div>
            </div>
        </section>
    <!-- testimonial part end -->

    <!-- services part here -->
    <section class="about_section padding_top">
        <div class="container custom_container">
            <div class="row justify-content-center">
                <div class="col-lg-7">
                    <div class="section_tittle_style_02">
                        <h2 class="title wow fadeInDown" data-wow-delay=".3s">What We Are Doing</h2>
                        <p class="description wow fadeInDown" data-wow-delay=".3s">Abivruthi Kindergarten School offers a contemporary approach to early childhood education</p>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-6">
                    <div class="img_section">
                        <img src="img/about_img_1.png" alt="#" class="about_img_1" data-parallax='{"x": 0, "y": 30, "rotateZ":0}'>
                        <img src="img/full/1 (2).jpg" alt="#" class="about_img_2">
                        <img src="img/full/3 (2).jpg" alt="#" class="about_img_3" data-parallax='{"x": 0, "y": -50, "rotateZ":0}'>
                    </div>
                </div>
                <div class="col-lg-6 col-xl-5">
                    <div class="about_section_content">
                        <p class="wow fadeInDown" data-wow-delay=".3s">Abivruthi Kindergarten School offers modern education with ECCE and NCERT standards. Our advanced facilities, innovative teaching methods, and collaborative parent involvement create a nurturing environment for holistic learning</p>
                        <div class="list_content">
                            <ul>
                                <li class="wow fadeInDown" data-wow-delay=".3s"><i class="far fa-check-circle"></i> Cutting-edge curriculum aligned with ECCE and NCERT standards.</li>
                                <li class="wow fadeInDown" data-wow-delay=".3s"><i class="far fa-check-circle"></i> State-of-the-art facilities and advanced safety protocols.</li>
                                <li class="wow fadeInDown" data-wow-delay=".3s"><i class="far fa-check-circle"></i> Interactive platforms for parent engagement and community involvement.</li>
                                <li class="wow fadeInDown" data-wow-delay=".3s"><i class="far fa-check-circle"></i> Streamlined admissions process with digital options and stringent safety measures</li>
                            </ul>
                        </div>
                        <a class="pc-button elementor-button button-link cu_btn mt-4" href="about.php">
                            <div class="button-content-wrapper">
                                <span class="elementor-button-text">Discover More</span>
                                <svg class="pc-dashes inner-dashed-border animated-dashes">
                                    <rect x="5px" y="5px" rx="22px" ry="22px" width="0" height="0"></rect>
                                </svg>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- services part end -->

    <?php include 'footer.php'; ?>

    <!-- jquery slim -->
    <script src="js/jquery-3.5.1.min.js"></script>
    <!-- popper js -->
    <script src="js/popper.min.js"></script>
    <!-- bootstrap js -->
    <script src="js/bootstrap.min.js"></script>
    <!-- nice select -->
    <script src="vendors/niceselect/js/jquery.nice-select.min.js"></script>
    <!-- owl carousel js -->
    <script src="vendors/owl_carousel/js/owl.carousel.min.js"></script>
    <!-- parallax js -->
    <script src="vendors/parallax/jquery.parallax-scroll.js"></script>
    <script src="vendors/parallax/parallax.js"></script>
    <!-- wow js -->
    <script src="vendors/wow/wow.min.js"></script>
    <!-- isotop js -->
    <script src="vendors/isotop/imagesloaded.pkgd.min.js"></script>
    <script src="vendors/isotop/isotope.pkgd.js"></script>
    <!-- magnify popup js -->
    <script src="vendors/magnify_popup/jquery.magnific-popup.js"></script>
    <!-- custom js -->
    <script src="js/custom.js"></script>

    <!-- Guidance Modal -->
    <div class="modal fade" id="guidanceModal" tabindex="-1" role="dialog" aria-labelledby="guidanceModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="guidanceModalLabel">Guidelines</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <ul>
                        <li>Respect your teachers and classmates.</li>
                        <li>Always try your best and ask questions.</li>
                        <li>Keep your classroom tidy and organized.</li>
                        <li>Be kind and helpful to everyone.</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Assessment Modal -->
    <div class="modal fade" id="assessmentModal" tabindex="-1" role="dialog" aria-labelledby="assessmentModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="assessmentModalLabel">Assessment</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <ul>
                        <li>Regular observation of participation in class activities.</li>
                        <li>Creative work and project submissions.</li>
                        <li>Development of social and communication skills.</li>
                        <li>Progress in basic literacy and numeracy.</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript for Dynamic Media Import -->
    <script>
        // Global variables
        let filterButtons = [];
        let gridContainer = null;

        // Initialize when DOM is ready
        document.addEventListener("DOMContentLoaded", function () {
            console.log('DOM Content Loaded - Starting initialization...');
            
            // Get elements
            filterButtons = document.querySelectorAll(".filters li");
            gridContainer = document.querySelector("#program_list_filter");
            
            console.log('Filter buttons found:', filterButtons.length);
            console.log('Grid container found:', gridContainer);
            
            if (!gridContainer) {
                console.error('Grid container not found!');
                return;
            }
            
            // Initialize everything
            initializeVideoGallery();
        });

        function initializeVideoGallery() {
            console.log('Initializing video gallery...');

            function loadMedia(filter) {
                console.log('Loading media for filter:', filter);
                
                if (!gridContainer) {
                    console.error('Grid container not available');
                    return;
                }
                
                fetch(`get_videos.php?filter=${filter}`)
                    .then(response => {
                        console.log('Fetch response status:', response.status, response.statusText);
                        if (!response.ok) {
                            throw new Error(`HTTP error! Status: ${response.status} ${response.statusText}`);
                        }
                        return response.json();
                    })
                    .then(data => {
                        console.log('Fetched media for', filter, ':', data);
                        if (data.error) {
                            console.error('Server error:', data.error);
                            displayMedia(filter, []);
                        } else {
                            displayMedia(filter, data);
                        }
                    })
                    .catch(error => {
                        console.error('Error fetching media:', error.message);
                        displayMedia(filter, []);
                    });
            }

            function displayMedia(filter, files) {
                console.log('displayMedia called with filter:', filter, 'files:', files);
                
                if (!gridContainer) {
                    console.error('Grid container not found!');
                    return;
                }
                
                // Clear container
                gridContainer.innerHTML = "";
                
                if (!files || files.length === 0) {
                    console.log('No files returned for', filter);
                    const noMediaMsg = document.getElementById("no-media-message");
                    if (noMediaMsg) {
                        noMediaMsg.style.display = "block";
                    }
                    return;
                }
                
                const noMediaMsg = document.getElementById("no-media-message");
                if (noMediaMsg) {
                    noMediaMsg.style.display = "none";
                }
                
                console.log('Processing', files.length, 'files for', filter);
                
                // Process each file
                files.forEach((item, index) => {
                    console.log(`Rendering item ${index}:`, item);
                    const div = document.createElement("div");
                    div.className = `col-lg-3 col-sm-12 col-md-6 grid-item ${filter}`;
                    div.style.display = "block";
                    const inner = document.createElement("div");
                    inner.className = "single_program_list";
                    if (item.type === "image") {
                        inner.innerHTML = `<a href="${item.src}" class="gallery_item magnific_popup"><img src="${item.src}" class="img-fluid" alt="Image" onerror="console.error('Failed to load image: ${item.src}')"></a>`;
                    } else if (item.type === "video") {
                        const videoTitle = item.src.split('/').pop().replace('.mp4', '').replace(/_/g, ' ');
                        const popupId = `video_${filter}_${index}`;
                        inner.innerHTML = `
                            <div class="video_thumbnail">
                                <video muted loop class="thumbnail-video">
                                    <source src="${item.src}" type="video/mp4">
                                    Your browser does not support the video tag.
                                </video>
                                <div class="video_overlay">
                                    <a href="#${popupId}" class="video_popup_btn">
                                        <i class="fas fa-play"></i>
                                    </a>
                                </div>
                            </div>
                            <div id="${popupId}" class="mfp-hide video-popup-content">
                                <div class="close-btn" onclick="$.magnificPopup.close();">&times;</div>
                                <video controls muted autoplay width="100%" height="auto">
                                    <source src="${item.src}" type="video/mp4">
                                    Your browser does not support the video tag.
                                </video>
                            </div>`;
                    }
                    div.appendChild(inner);
                    gridContainer.appendChild(div);
                    console.log('Appended element:', div);
                });
                console.log('Total elements in grid container:', gridContainer.children.length);
                // Initialize Magnific Popup for images
                if (typeof $ !== 'undefined' && $.fn.magnificPopup) {
                    $('.gallery_item').magnificPopup({
                        type: 'image',
                        gallery: {
                            enabled: true
                        }
                    });
                } else {
                    console.log('jQuery or Magnific Popup not available for images');
                }
                
                // Initialize Magnific Popup for videos
                if (typeof $ !== 'undefined' && $.fn.magnificPopup) {
                    $('.video_popup_btn').magnificPopup({
                        type: 'inline',
                        mainClass: 'mfp-fade',
                        removalDelay: 160,
                        preloader: false,
                        fixedContentPos: false,
                        callbacks: {
                            open: function() {
                                // Pause all thumbnail videos when popup opens
                                $('.thumbnail-video').each(function() {
                                    this.pause();
                                });
                                // Autoplay the popup video (muted by default)
                                var popupVideo = this.content.find('video')[0];
                                if (popupVideo && popupVideo.paused) {
                                    popupVideo.play().catch(function(error) {
                                        console.log('Autoplay prevented in popup:', error);
                                    });
                                }
                            },
                            close: function() {
                                // Pause the popup video and resume thumbnail videos
                                var currentVideo = this.content.find('video')[0];
                                if (currentVideo) {
                                    currentVideo.pause();
                                }
                                // Thumbnail videos remain static (no autoplay)
                            }
                        }
                    });
                } else {
                    console.log('jQuery or Magnific Popup not available for videos');
                }
                // Initialize Isotope
                if (typeof $ !== 'undefined' && $.fn.isotope) {
                    $(gridContainer).imagesLoaded(function () {
                        console.log('Isotope initializing for', filter);
                        $(gridContainer).isotope({
                            itemSelector: '.grid-item',
                            layoutMode: 'masonry',
                            masonry: {
                                columnWidth: '.grid-item',
                                gutter: 10
                            }
                        });
                    });
                } else {
                    console.log('jQuery or Isotope not available');
                }
                
                // Note: Thumbnail videos are set to autoplay in HTML but muted by default
                // Users can click to play the popup video with controls
            }

            // Default load for "This Week Highlights" with a small delay
            setTimeout(() => {
                console.log('Starting default load after delay...');
                loadMedia("week_activities");
            }, 100);

            // Handle click events for filter buttons
            filterButtons.forEach(button => {
                button.addEventListener("click", function () {
                    filterButtons.forEach(btn => btn.classList.remove("active"));
                    this.classList.add("active");
                    const filter = this.getAttribute("data-filter").slice(1);
                    console.log('Filter clicked:', filter);
                    loadMedia(filter);
                    
                    // Update Isotope filter if available
                    if (typeof $ !== 'undefined' && $.fn.isotope && gridContainer) {
                        $(gridContainer).isotope({ filter: `.${filter}` });
                    }
                });
            });

            // Initialize Isotope on page load
            if (typeof $ !== 'undefined' && $.fn.isotope && gridContainer) {
                $(gridContainer).imagesLoaded(function () {
                    console.log('Initial Isotope setup');
                    $(gridContainer).isotope({
                        itemSelector: '.grid-item',
                        layoutMode: 'masonry',
                        masonry: {
                            columnWidth: '.grid-item',
                            gutter: 10
                        }
                    });
                });
            } else {
                console.log('jQuery, Isotope, or grid container not available for initial setup');
            }
        }
    </script>
</body>

</html>